#### 缓存雪崩

##### 定义

- 大量请求redis无法处理



##### 出现场景

###### 场景一：过期时间导致的问题

- 数据的过期时间同时到了



解决措施：

- 设置过期时间的时候，设置一个随机分钟数
- 服务降级，降级的意思是非核心的请求直接返回空值，默认值，不请求缓存，也不查询数据库；对核心的请求访问数据库



###### 场景二：redis实例宕机

- 熔断
  - 业务端调用缓存接口时，直接返回，不访问redis，等恢复之后再访问
    - 熔断影响较大
- 限流
  - 令牌桶算法
- 提前预防
  - 建立集群和检测机制





#### 缓存击穿

##### 定义

请求的热点数据不存在，导致的数据库访问压力激增



##### 解决措施

- 热点数据永不过期
- 热点数据访问互斥
  - 如果为null，加锁，然后访问数据库更新



#### 缓存穿透

##### 定义

请求的数据即不在redis中也不在数据库中



##### 解决措施

- 业务层校验，去除不合法请求
- 空数据缓存，设置较短的过期时间
- 布隆过滤器，把这些不存在的请求放到布隆过滤器中
  - 后面存在了之后需要去更新







